DECLARE
     MIN_EMP_NO EMPLOYEE.EMP_NO%TYPE;
     MAX_EMP_NO EMPLOYEE.EMP_NO%TYPE;
     NO_STAR NUMBER;
     STAR_STR VARCHAR2(20);

BEGIN
     SELECT MAX(EMP_NO) INTO MAX_EMP_NO FROM EMPLOYEE;
     SELECT MIN(EMP_NO) INTO MIN_EMP_NO FROM EMPLOYEE;

     FOR i IN MIN_EMP_NO .. MAX_EMP_NO LOOP
          SELECT ROUND(EMP_SAL/1000) INTO NO_STAR FROM EMPLOYEE WHERE EMP_NO = i;

          IF NO_STAR > 0 THEN
               STAR_STR := '';
               FOR j  IN 1 .. NO_STAR LOOP
                    STAR_STR := STAR_STR || '*';
               END LOOP;
          END IF;
          UPDATE EMPLOYEE SET STARS = STAR_STR WHERE EMP_NO = i ;
     END LOOP;
END;
